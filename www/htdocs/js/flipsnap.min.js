!function(t,a,i){function n(t,e){return this instanceof n?this.init(t,e):new n(t,e)}function s(t,e){return(t.changedTouches?t.changedTouches[0]:t)[e]}function e(t){return u(t,function(t){return m.style[t]!==i})}function c(t){return t.charAt(0).toUpperCase()+t.substr(1)}function u(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n],n))return!0;return!1}var m=a.createElement("div"),p=["webkit","moz","o","ms"],o={},v=n.support={},d=!1;v.transform3d=e(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),v.transform=e(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),v.transition=e(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),v.addEventListener="addEventListener"in t,v.mspointer=t.navigator.msPointerEnabled,v.cssAnimation=(v.transform3d||v.transform)&&v.transition;var l=["touch","mouse"],f={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};v.addEventListener&&(a.addEventListener("gesturestart",function(){d=!0}),a.addEventListener("gestureend",function(){d=!1})),n.prototype.init=function(t,e){var n,r,o=this;if("string"==typeof(o.element=t)&&(o.element=a.querySelector(t)),!o.element)throw new Error("element not found");return v.mspointer&&(o.element.style.msTouchAction="pan-y"),e=e||{},o.distance=e.distance,o.maxPoint=e.maxPoint,o.disableTouch=e.disableTouch!==i&&e.disableTouch,o.disable3d=e.disable3d!==i&&e.disable3d,o.transitionDuration=e.transitionDuration===i?"350ms":e.transitionDuration+"ms",o.currentPoint=0,o.currentX=0,o.animation=!1,o.use3d=v.transform3d,!0===o.disable3d&&(o.use3d=!1),v.cssAnimation?o._setStyle({transitionProperty:(n="transform",m.style[n]!==i?n:(u(p,function(t){var e=c(t)+c(n);return m.style[e]!==i&&(r="-"+t+"-"+n,1)}),r)),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:o._getTranslate(0)}):o._setStyle({position:"relative",left:"0px"}),o.refresh(),l.forEach(function(t){o.element.addEventListener(f.start[t],o,!1)}),o},n.prototype.handleEvent=function(t){var e=this;switch(t.type){case f.start.touch:case f.start.mouse:e._touchStart(t);break;case f.move.touch:case f.move.mouse:e._touchMove(t);break;case f.end.touch:case f.end.mouse:e._touchEnd(t);break;case"click":e._click(t)}},n.prototype.refresh=function(){var o=this;o._maxPoint=o.maxPoint===i?function(){for(var t=o.element.childNodes,e=-1,n=0,r=t.length;n<r;n++)1===t[n].nodeType&&e++;return e}():o.maxPoint,o.distance===i?o._maxPoint<0?o._distance=0:o._distance=o.element.scrollWidth/(o._maxPoint+1):o._distance=o.distance,o._maxX=-o._distance*o._maxPoint,o.moveToPoint()},n.prototype.hasNext=function(){return this.currentPoint<this._maxPoint},n.prototype.hasPrev=function(){return 0<this.currentPoint},n.prototype.toNext=function(t){var e=this;e.hasNext()&&e.moveToPoint(e.currentPoint+1,t)},n.prototype.toPrev=function(t){this.hasPrev()&&this.moveToPoint(this.currentPoint-1,t)},n.prototype.moveToPoint=function(t,e){var n=this;e=e===i?n.transitionDuration:e+"ms";var r=n.currentPoint;t===i&&(t=n.currentPoint),t<0?n.currentPoint=0:t>n._maxPoint?n.currentPoint=n._maxPoint:n.currentPoint=parseInt(t,10),v.cssAnimation?n._setStyle({transitionDuration:e}):n.animation=!0,n._setX(-n.currentPoint*n._distance,e),r!==n.currentPoint&&(n._triggerEvent("fsmoveend",!0,!1),n._triggerEvent("fspointmove",!0,!1))},n.prototype._setX=function(t,e){var n=this;n.currentX=t,v.cssAnimation?n.element.style[o.transform]=n._getTranslate(t):n.animation?n._animate(t,e||n.transitionDuration):n.element.style.left=t+"px"},n.prototype._touchStart=function(e){var t,n=this;n.disableTouch||n._eventType||d||(u(l,function(t){return e.type===f.start[t]&&(n._eventType=t,1)}),n.element.addEventListener(f.move[n._eventType],n,!1),a.addEventListener(f.end[n._eventType],n,!1),t=e.target.tagName,"mouse"===n._eventType&&"SELECT"!==t&&"INPUT"!==t&&"TEXTAREA"!==t&&"BUTTON"!==t&&e.preventDefault(),v.cssAnimation?n._setStyle({transitionDuration:"0ms"}):n.animation=!1,n.scrolling=!0,n.moveReady=!1,n.startPageX=s(e,"pageX"),n.startPageY=s(e,"pageY"),n.basePageX=n.startPageX,n.directionX=0,n.startTime=e.timeStamp,n._triggerEvent("fstouchstart",!0,!1))},n.prototype._touchMove=function(t){var e,n,r,o,i=this;i.scrolling&&!d&&(e=s(t,"pageX"),o=s(t,"pageY"),i.moveReady?(t.preventDefault(),n=e-i.basePageX,(0<=(r=i.currentX+n)||r<i._maxX)&&(r=Math.round(i.currentX+n/3)),i.directionX=0==n?i.directionX:0<n?-1:1,!i._triggerEvent("fstouchmove",!0,!0,{delta:n,direction:i.directionX})?i._touchAfter({moved:!1,originalPoint:i.currentPoint,newPoint:i.currentPoint,cancelled:!0}):i._setX(r)):(r=Math.abs(e-i.startPageX),o=Math.abs(o-i.startPageY),5<r?(t.preventDefault(),i.moveReady=!0,i.element.addEventListener("click",i,!0)):5<o&&(i.scrolling=!1,i._touchEnd())),i.basePageX=e)},n.prototype._touchEnd=function(t){var e,n=this;n.element.removeEventListener(f.move[n._eventType],n,!1),a.removeEventListener(f.end[n._eventType],n,!1),n._eventType=null,n.scrolling&&(e=-n.currentX/n._distance,(e=0<n.directionX?Math.ceil(e):n.directionX<0?Math.floor(e):Math.round(e))<0?e=0:e>n._maxPoint&&(e=n._maxPoint),n._touchAfter({moved:e!==n.currentPoint,originalPoint:n.currentPoint,newPoint:e,cancelled:!1}),n.moveToPoint(e))},n.prototype._click=function(t){t.stopPropagation(),t.preventDefault()},n.prototype._touchAfter=function(t){var e=this;e.scrolling=!1,e.moveReady=!1,setTimeout(function(){e.element.removeEventListener("click",e,!0)},200),e._triggerEvent("fstouchend",!0,!1,t)},n.prototype._setStyle=function(t){var e,n=this.element.style;for(e in t)!function(e,n,r){var t=o[n];t?e[t]=r:e[n]!==i?(o[n]=n,e[n]=r):u(p,function(t){t=c(t)+c(n);return e[t]!==i&&(o[n]=t,e[t]=r,1)})}(n,e,t[e])},n.prototype._animate=function(t,e){var n=this.element,r=+new Date,o=parseInt(n.style.left,10),i=t,a=parseInt(e,10),s=setInterval(function(){var t=new Date-r,e=a<t?(clearInterval(s),i):(e=t,-(e/=a)*(e-2)*(i-o)+o);n.style.left=e+"px"},10)},n.prototype.destroy=function(){var e=this;l.forEach(function(t){e.element.removeEventListener(f.start[t],e,!1)})},n.prototype._getTranslate=function(t){return this.use3d?"translate3d("+t+"px, 0, 0)":"translate("+t+"px, 0)"},n.prototype._triggerEvent=function(t,e,n,r){var o=a.createEvent("Event");if(o.initEvent(t,e,n),r)for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);return this.element.dispatchEvent(o)},"object"==typeof exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):t.Flipsnap=n}(window,window.document);